<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Ruoli
    </ion-title>
  </ion-toolbar>
</ion-header>



<ion-content [fullscreen]="true">

  <div *ngIf="central.error"
    style=" padding:1em ;text-align: center; color: white; background-color: rgb(255, 115, 115);">
    ERROR
    <ion-icon name="close-circle-outline" (click)="central.error = null"
      style="margin-left: 5px; cursor: pointer;"></ion-icon>
  </div>

  <div style="display: flex; flex-wrap: wrap;">
    <button id="new-role-btn" class="ion-margin purple-btn" style="text-transform: uppercase;">aggiungi un nuovo
      ruolo</button>
    <ion-popover trigger="new-role-btn">
      <ng-template>
        <ion-content class="ion-padding">
          <form #g="ngForm" (submit)="central.addRole(g)" class="example-form">
            <mat-form-field class="example-full-width">
              <mat-label>Nome</mat-label>
              <input matInput placeholder="Es. Mario" name="title" [ngModel] required>
            </mat-form-field>

            <mat-form-field class="example-full-width">
              <mat-label>Descrizione</mat-label>
              <input matInput placeholder="Es. Ruolo di amministratore" name="description" [ngModel]>
            </mat-form-field>

            <button class="conf" type="submit">
              Conferma
            </button>
          </form>

        </ion-content>
      </ng-template>
    </ion-popover>

  </div>

  <table>
    <tr id="labels">
      <th *ngFor="let i of central.roles_labels" style="width: 20vw; text-align: start;">{{i}}</th>
    </tr>
    <tr *ngFor="let i of central.roles">
      <td>{{i.id}}</td>
      <td>{{i.title}}</td>
      <td>{{i.description}}</td>
      <td>{{i.default}}</td>
      <ion-icon class="trash" name="trash-outline" (click)="central.deleteRole(i)" [style.display]="i.id < 3 ? 'none' : 'visible'"></ion-icon>
    </tr>
  </table>
</ion-content>
