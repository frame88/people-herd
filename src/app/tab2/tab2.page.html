<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Persone
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">

  <div *ngIf="central.error" style=" padding:1em ;text-align: center; color: white; background-color: rgb(255, 115, 115);">
    ERROR
    <ion-icon name="close-circle-outline" (click)="central.error = null" style="margin-left: 5px; cursor: pointer;"></ion-icon>
  </div>

  <div style="display: flex; flex-wrap: wrap;">

    <button id="trigger-button" class="purple-btn ion-margin">aggiungi un nuovo membro</button>
    <ion-popover trigger="trigger-button">
      <ng-template>
        <ion-content class="ion-padding">
          <form #f="ngForm" (submit)="central.addUsers(f)" class="example-form">
            <mat-form-field class="example-full-width">
              <mat-label>Gruppo</mat-label>
              <input matInput type="number" placeholder="Es. Un numero intero" name="group" [ngModel] required>
            </mat-form-field>
            <mat-form-field class="example-full-width">
              <mat-label>Nome</mat-label>
              <input matInput placeholder="Es. Mario" name="name" [ngModel] required>
            </mat-form-field>
            <mat-form-field class="example-full-width">
              <mat-label>Cognome</mat-label>
              <input matInput placeholder="Es. Rossi" name="surname" [ngModel]>
            </mat-form-field>
            <mat-form-field class="example-full-width">
              <mat-label>Nickname</mat-label>
              <input matInput placeholder="Es. Pippo" name="username" [ngModel]>
            </mat-form-field>
            <mat-form-field class="example-full-width">
              <mat-label>Mail</mat-label>
              <input matInput placeholder="Es. mario.rossi@gmail.com" name="mail" [ngModel]>
            </mat-form-field>
            <button type="submit" class="conf">
              Conferma
            </button>
          </form>

        </ion-content>
      </ng-template>
    </ion-popover>

  </div>

  <div style="margin: 2em;">
    <table>
      <tr class="labels">
        <th *ngFor="let i of central.users_labels" style="width: 20vw; text-align: start;">{{i}}</th>
      </tr>
      <tr *ngFor="let i of central.users" style="position: relative; cursor: pointer;"
        [routerLink]="['tabs/tab2/usermod', i.id]">
        <td>{{i.id}}</td>
        <td class="txt-capital">{{i.name}}</td>
        <td class="txt-capital">{{i.surname}}</td>
        <td class="txt-capital">{{i.username}}</td>
        <td>{{i.mail}}</td>
        <td>{{i.group}}</td>
        <ion-icon class="trash" name="trash-outline" (click)="central.deleteUsers(i)"></ion-icon>
      </tr>
    </table>
  </div>

</ion-content>
